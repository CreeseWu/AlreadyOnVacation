"use strict";(self["webpackChunkdemo3"]=self["webpackChunkdemo3"]||[]).push([[401],{68932:function(e,t,l){l.d(t,{M:function(){return s},V:function(){return i}});var n=l(49486),a=l(15758),s=function(e,t){n.Z.dispatch(a.e.SET_BREADCRUMB_ACTION,{title:e,pageBreadcrumbPath:t})},i=function(e){n.Z.dispatch(a.e.SET_BREADCRUMB_ACTION,{title:e})}},50811:function(e,t,l){l.r(t),l.d(t,{default:function(){return We}});var n=l(66252),a={class:"d-flex flex-wrap flex-stack mb-6"},s=(0,n._)("h3",{class:"fw-semobold my-2 text-gray-400"}," 共100个文件 ",-1),i={class:"d-flex my-2"},o={class:"row g-6 g-xl-9 mb-6 mb-xl-9"},r={class:"row g-6 g-xl-9 mb-6 mb-xl-9"},c=(0,n._)("div",{class:"col d-none d-xl-block"},null,-1),d=(0,n._)("div",{class:"col d-none d-xl-block"},null,-1),u=(0,n._)("div",{class:"col d-none d-xl-block"},null,-1);function m(e,t,l,m,f,p){var _=(0,n.up)("KTFile");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",a,[s,(0,n._)("div",i,[(0,n._)("input",{type:"file",id:"btn_file",style:{display:"none"},ref:"hiddenInput",onChange:t[0]||(t[0]=function(){for(var t=[],l=0;l<arguments.length;l++)t[l]=arguments[l];return e.uploadFile&&e.uploadFile.apply(e,t)})},null,544),(0,n._)("a",{href:"#",class:"btn btn-primary btn-sm","data-bs-toggle":"tooltip",title:"Coming soon",onClick:t[1]||(t[1]=function(){for(var t=[],l=0;l<arguments.length;l++)t[l]=arguments[l];return e.selectFile&&e.selectFile.apply(e,t)})}," 上传文件 ")])]),(0,n._)("div",o,[(0,n.Wm)(_,{"file-title":"Project Reqs..","file-type":"pdf","created-at":"3 days ago"}),(0,n.Wm)(_,{"file-title":"CRM App Docs..","file-type":"doc","created-at":"3 days ago"}),(0,n.Wm)(_,{"file-title":"User CRUD Styles","file-type":"css","created-at":"4 days ago"}),(0,n.Wm)(_,{"file-title":"Metronic Logo","file-type":"ai","created-at":"5 days ago"}),(0,n.Wm)(_,{"file-title":"Orders backup","file-type":"sql","created-at":"1 week ago"})]),(0,n._)("div",r,[(0,n.Wm)(_,{"file-title":"UTAIR CRM API Co..","file-type":"xml","created-at":"2 weeks ago"}),(0,n.Wm)(_,{"file-title":"Tower Hill App..","file-type":"tif","created-at":"3 weeks ago"}),c,d,u])],64)}var f=l(70655),p=l(2262),_=l(3577),b={class:"card h-100"},v={class:"card-body d-flex justify-content-center text-center flex-column p-8","data-kt-menu-trigger":"click","data-kt-menu-overflow":"true","data-kt-menu-placement":"{default:'bottom', 'lg': 'right-start'}"},g={href:"#",class:"text-gray-800 text-hover-primary d-flex flex-column"},y={class:"symbol symbol-60px mb-6"},h=["src"],x={class:"fs-5 fw-bold mb-2"},k={class:"fs-7 fw-semobold text-gray-400 mt-auto"};function w(e,t,l,a,s,i){var o=(0,n.up)("FileMenu");return(0,n.wg)(),(0,n.iD)("div",{class:"col-12 col-sm-12 col-xl",onClick:t[0]||(t[0]=function(){for(var t=[],l=0;l<arguments.length;l++)t[l]=arguments[l];return e.clickFile&&e.clickFile.apply(e,t)})},[(0,n._)("div",b,[(0,n._)("div",v,[(0,n._)("a",g,[(0,n._)("div",y,[(0,n._)("img",{src:"media/svg/files/".concat(e.fileType,".svg"),alt:""},null,8,h)]),(0,n._)("div",x,(0,_.zw)(e.fileTitle),1)]),(0,n._)("div",k,(0,_.zw)(e.createdAt),1)]),(0,n.Wm)(o)])])}var C=(0,n.uE)('<div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-semobold py-4 fs-6 w-100px" data-kt-menu="true"><div class="menu-item px-5"><a class="menu-link px-5"> 下载 </a></div><div class="menu-item px-5" data-bs-toggle="modal" data-bs-target="#kt_modal_share_file"><a class="menu-link px-5"> 分享 </a></div><div class="menu-item px-5"><a class="menu-link px-5"> 删除 </a></div><div class="menu-item px-5"><a class="menu-link px-5"> 属性 </a></div></div>',1);function F(e,t,l,a,s,i){var o=(0,n.up)("ShareFileModal");return(0,n.wg)(),(0,n.iD)(n.HY,null,[C,(0,n.Wm)(o)],64)}var S=l(85845),W=l(33907),A=l(22201),T=l(49963),R={class:"modal fade",id:"kt_modal_share_file",tabindex:"-1","aria-hidden":"true"},D={class:"modal-dialog modal-dialog-centered mw-650px"},U={class:"modal-content"},M={class:"modal-header flex-stack"},B=(0,n._)("h2",null,"文件分享",-1),V={class:"svg-icon svg-icon-1"},Z={class:"modal-body scroll-y pt-10 pb-15 px-lg-17"},H=(0,n._)("p",{class:"text-gray-400 fs-5 fw-semobold mb-10"},"请选择分享方式",-1),I={class:"pb-10"},E={class:"btn btn-outline btn-outline-dashed btn-outline-default p-7 d-flex align-items-center mb-5",for:"kt_modal_share_is_enc_option_1"},P={class:"svg-icon svg-icon-4x me-4"},O=(0,n._)("span",{class:"d-block fw-semobold text-start"},[(0,n._)("span",{class:"text-dark fw-bold d-block fs-3"},"明文分享"),(0,n._)("span",{class:"text-gray-400 fw-semobold fs-6"}," 访问者可以直接下载到明文文件，文件加密的对称密钥将会包含在分享链接中。 ")],-1),q={class:"btn btn-outline btn-outline-dashed btn-outline-default p-7 d-flex align-items-center",for:"kt_modal_share_is_enc_option_2"},L={class:"svg-icon svg-icon-4x me-4"},j=(0,n._)("span",{class:"d-block fw-semobold text-start"},[(0,n._)("span",{class:"text-dark fw-bold d-block fs-3"},"加密分享"),(0,n._)("span",{class:"text-gray-400 fw-semobold fs-6"},"访问者仅能下载到加密后的文件，并进行签名校验，但无法解密文件内容。")],-1),G=(0,n._)("h3",{class:"text-dark fw-bold fs-3 mb-5"},"设置分享权限",-1),z=(0,n._)("div",{class:"text-gray-400 fw-semobold mb-10"}," 设置访问者的权限，包括分享的时间、次数等限制。 ",-1),K={class:"row mb-10"},N={class:"col-md-6 fv-row"},Y=(0,n._)("label",{class:"required fs-6 fw-semobold mb-2"},"过期时间",-1),J={class:"position-relative align-items-center"},Q={class:"symbol symbol-20px me-4 position-absolute ms-4"},X={class:"symbol-label bg-secondary"},$={class:"svg-icon"},ee={class:"col-md-6 fv-row"},te=(0,n._)("label",{class:"required fs-6 fw-semobold mb-2"},"允许下载次数",-1),le={class:"d-flex flex-center"},ne={ref:"submitShareButtonRef",type:"submit",class:"btn btn-primary"},ae=(0,n._)("span",{class:"indicator-label"}," 提交 ",-1),se=(0,n._)("span",{class:"indicator-progress"},[(0,n.Uk)(" 分享中... "),(0,n._)("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),ie=[ae,se];function oe(e,t,l,a,s,i){var o=(0,n.up)("inline-svg"),r=(0,n.up)("el-date-picker"),c=(0,n.up)("el-form-item"),d=(0,n.up)("el-input-number"),u=(0,n.up)("Form");return(0,n.wg)(),(0,n.iD)("div",R,[(0,n._)("div",D,[(0,n._)("div",U,[(0,n._)("div",M,[B,(0,n._)("div",{class:"btn btn-sm btn-icon btn-active-color-primary",onClick:t[0]||(t[0]=function(t){return e.share_file_type=""}),"data-bs-dismiss":"modal"},[(0,n._)("span",V,[(0,n.Wm)(o,{src:"media/icons/duotune/arrows/arr061.svg"})])])]),(0,n._)("div",Z,[(0,n._)("div",{class:(0,_.C_)([""!==e.share_file_type&&"d-none"])},[H,(0,n._)("div",I,[(0,n.wy)((0,n._)("input",{type:"radio",class:"btn-check",name:"auth_option",value:"share_not_enc",checked:"checked",id:"kt_modal_share_is_enc_option_1","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.value=t})},null,512),[[T.G2,e.value]]),(0,n._)("label",E,[(0,n._)("span",P,[(0,n.Wm)(o,{src:"media/icons/duotune/coding/cod001.svg"})]),O]),(0,n.wy)((0,n._)("input",{type:"radio",class:"btn-check",name:"auth_option",value:"share_enc",id:"kt_modal_share_is_enc_option_2","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.value=t})},null,512),[[T.G2,e.value]]),(0,n._)("label",q,[(0,n._)("span",L,[(0,n.Wm)(o,{src:"media/icons/duotune/communication/com003.svg"})]),j])]),(0,n._)("button",{onClick:t[3]||(t[3]=function(t){return e.share_file_type=e.value}),class:"btn btn-primary w-100"}," 下一步 ")],2),(0,n._)("div",{class:(0,_.C_)([""===e.share_file_type&&"d-none"])},[G,z,(0,n.Wm)(u,{class:"form",onSubmit:t[6]||(t[6]=function(t){return e.submitShareForm()})},{default:(0,n.w5)((function(){return[(0,n._)("div",K,[(0,n._)("div",N,[Y,(0,n._)("div",J,[(0,n._)("div",Q,[(0,n._)("span",X,[(0,n._)("span",$,[(0,n.Wm)(o,{src:"media/icons/duotune/general/gen025.svg"})])])]),(0,n.Wm)(c,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(r,{placeholder:"请选择",modelValue:e.expiredDate,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.expiredDate=t})},null,8,["modelValue"])]})),_:1})])]),(0,n._)("div",ee,[te,(0,n.Wm)(c,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(d,{placeholder:"请输入",modelValue:e.downloadCount,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.downloadCount=t})},null,8,["modelValue"])]})),_:1})])]),(0,n._)("div",le,[(0,n._)("button",ne,ie,512)])]})),_:1})],2)])])])])}var re=l(12954),ce=l(78764),de=l.n(ce),ue=(0,n.aZ)({name:"share-file-modal",components:{Form:re.l0},setup:function(){var e=(0,p.iH)(""),t=(0,p.iH)(""),l=(0,p.iH)(0),n=(0,p.iH)(""),a=(0,p.iH)(null),s=function(){a.value&&(console.log(t.value,l.value),a.value.disabled=!0,a.value.setAttribute("data-kt-indicator","on"),setTimeout((function(){var e;a.value&&(a.value.disabled=!1,null===(e=a.value)||void 0===e||e.removeAttribute("data-kt-indicator")),de().fire({text:"分享成功",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}}).then((function(){n.value=""}))}),2e3))};return{value:e,share_file_type:n,submitShareForm:s,submitShareButtonRef:a,expiredDate:t,downloadCount:l}}}),me=l(83744);const fe=(0,me.Z)(ue,[["render",oe]]);var pe=fe,_e=(0,n.aZ)({name:"file-menu",components:{ShareFileModal:pe},setup:function(){(0,A.tv)(),(0,S.QT)(),(0,W.oR)();return{}}});const be=(0,me.Z)(_e,[["render",F]]);var ve=be,ge=(0,n.aZ)({name:"file-card",props:{fileTitle:String,createdAt:String,fileType:String,fileId:String},components:{FileMenu:ve},methods:{clickFile:function(){console.log("file clicked, id: "+this.fileId+" type: "+this.fileType+" title: "+this.fileTitle)}}});const ye=(0,me.Z)(ge,[["render",w]]);var he=ye,xe=l(68932),ke=l(81354),we=l.n(ke),Ce=l(15758),Fe=(0,n.aZ)({name:"profile-documents",components:{KTFile:he},setup:function(){(0,n.bv)((function(){(0,xe.M)("Documents",["Pages","Profile"])}));var e=(0,p.iH)(null),t=(0,W.oR)();return{hiddenInput:e,selectFile:function(){e.value&&e.value.click()},uploadFile:function(e){if(null!=e.target){var l=e.target["files"][0],n=new FileReader;n.readAsDataURL(l),n.onload=function(){return(0,f.mG)(this,void 0,void 0,(function(){var e,n,a;return(0,f.Jh)(this,(function(s){switch(s.label){case 0:return e=Array.from(crypto.getRandomValues(new Uint8Array(16))).map((function(e){return e.toString(16)})).join(""),e=we().MD5(e).toString(),"string"!==typeof this.result?[3,2]:(n=we().enc.Utf8.parse(this.result),a=we().AES.encrypt(n,e,{mode:we().mode.ECB,padding:we().pad.Pkcs7}).toString(),[4,t.dispatch(Ce.e.UPLOAD_FILE,{name:l.name,type:l.type,encrypted:a,file_enc_key:e})]);case 1:s.sent(),s.label=2;case 2:return[2]}}))}))}}}}}});const Se=(0,me.Z)(Fe,[["render",m]]);var We=Se}}]);