
## 文件签名与验签


主要使用RSA密钥对，包括以下几个步骤。

1. 生成：在用户注册时生成。使用浏览器crypto库生成。
    - 公钥：明文传输和存储。
    - 私钥：使用主密钥加密后传输和存储。

2. 签名：在用户分享文件时。
    -  发起分享$\to$下载加密后文件$\to$取哈希值$\to$下载加密后私钥$\to$使用主密钥解密私钥$\to$使用私钥加密哈希值（签名）

3. 验签：在用户下载他人分享文件时。
    - 下载加密后文件$\to$下载分享者公钥$\to$使用公钥解密（验签）$\to$显示验证状态$\to$解密文件

| BUG                                 | 解决方法             |
|-------------------------------------|------------------|
| 前端使用ctypto库生成的RSA密钥对为字节数组格式，不方便传输存储 | 生成后转换为pem格式传输和存储 |
| 散列值密文过长，需要分组加密                      | 将RSA密钥长度设为4096   |
| 用户可能伪造RSA密钥对                        | 登录时使用公钥加密令牌      |
| 使用JSEncrypt库无法公钥加密                  | 换用签名库jsrsasign   |
